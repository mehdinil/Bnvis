import 'dart:math';

/// Ø³Ø±ÙˆÛŒØ³ AI Coach (Mock Ø¢ÙÙ„Ø§ÛŒÙ†)
/// Ø¯Ø± ÙØ§Ø² Ø§ÙˆÙ„ Ø¨Ø§ Ù‚ÙˆØ§Ù†ÛŒÙ† Ø³Ø§Ø¯Ù‡ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯
class AiCoachService {
  final _random = Random();

  /// ØªØ­Ù„ÛŒÙ„ Ù…ØªÙ† Ú˜ÙˆØ±Ù†Ø§Ù„ Ùˆ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¨ÛŒÙ†Ø´
  String analyzeJournal(String content) {
    final lowerContent = content.toLowerCase();

    // Ú©Ù„Ù…Ø§Øª Ú©Ù„ÛŒØ¯ÛŒ Ù…Ø«Ø¨Øª
    if (lowerContent.contains('Ø®ÙˆØ´Ø­Ø§Ù„') ||
        lowerContent.contains('Ø¹Ø§Ù„ÛŒ') ||
        lowerContent.contains('Ù…ÙˆÙÙ‚')) {
      return 'ğŸ‰ Ø±ÙˆØ² Ù¾Ø±Ø§Ù†Ø±Ú˜ÛŒ! Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ø¯Ù‡ØŒ Ø¯Ø§Ø±ÛŒ Ø®ÛŒÙ„ÛŒ Ø®ÙˆØ¨ Ù¾ÛŒØ´ Ù…ÛŒâ€ŒØ±ÛŒ.';
    }

    // Ú©Ù„Ù…Ø§Øª Ú©Ù„ÛŒØ¯ÛŒ Ù…Ù†ÙÛŒ
    if (lowerContent.contains('Ø®Ø³ØªÙ‡') ||
        lowerContent.contains('Ù†Ø§Ø§Ù…ÛŒØ¯') ||
        lowerContent.contains('Ø³Ø®Øª')) {
      return 'ğŸ’ª Ø±ÙˆØ²Ù‡Ø§ÛŒ Ø³Ø®Øª Ù‡Ù… Ù…ÛŒâ€ŒÚ¯Ø°Ø±Ù†Ø¯. ÛŒÚ© Ù‚Ø¯Ù… Ú©ÙˆÚ†Ú© Ø¨Ø±Ø§ÛŒ ÙØ±Ø¯Ø§ Ú©Ø§ÙÛŒÙ‡.';
    }

    // Ú©Ù„Ù…Ø§Øª Ù…Ø±ØªØ¨Ø· Ø¨Ø§ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ
    if (lowerContent.contains('ÛŒØ§Ø¯ Ú¯Ø±ÙØªÙ…') ||
        lowerContent.contains('Ù…Ø·Ø§Ù„Ø¹Ù‡') ||
        lowerContent.contains('Ú©ØªØ§Ø¨')) {
      return 'ğŸ“š ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ù‡Ø± Ø±ÙˆØ² ÛŒÚ© Ù‚Ø¯Ù… Ø¨Ù‡ Ø¬Ù„Ùˆ Ø§Ø³Øª. Ø¹Ø§Ù„ÛŒ!';
    }

    // ÙˆØ±Ø²Ø´
    if (lowerContent.contains('ÙˆØ±Ø²Ø´') ||
        lowerContent.contains('ØªÙ…Ø±ÛŒÙ†') ||
        lowerContent.contains('Ø¯ÙˆÛŒØ¯Ù†')) {
      return 'ğŸƒâ€â™‚ï¸ Ø­Ø±Ú©Øª ÛŒØ¹Ù†ÛŒ Ø²Ù†Ø¯Ú¯ÛŒ! Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ø¯Ù‡.';
    }

    // Ù¾ÛŒØ´â€ŒÙØ±Ø¶
    return 'âœ¨ Ø§Ù…Ø±ÙˆØ² Ù‡Ù… ÛŒÚ© Ø±ÙˆØ² Ø®Ø§Øµ Ø¨ÙˆØ¯. Ø¨Ù‡ Ø¬Ù„Ùˆ Ù†Ú¯Ø§Ù‡ Ú©Ù†!';
  }

  /// Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù‡Ø¯Ù Ø¨Ø¹Ø¯ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¹Ø§Ø¯Ø§Øª
  String suggestNextGoal(List<String> completedHabits) {
    if (completedHabits.isEmpty) {
      return 'Ø´Ø±ÙˆØ¹ Ø¨Ø§ ÛŒÚ© Ø¹Ø§Ø¯Øª Ú©ÙˆÚ†Ú© Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ø±ÙˆØ²Øª Ø±Ùˆ Ù…ØªØ­ÙˆÙ„ Ú©Ù†Ù‡!';
    }

    if (completedHabits.length >= 3) {
      return 'ÙˆØ§Ø§Ùˆ! Ø§Ù…Ø±ÙˆØ² Ø³Ù‡ Ø¹Ø§Ø¯Øª Ø±Ùˆ ØªÚ©Ù…ÛŒÙ„ Ú©Ø±Ø¯ÛŒ. ÛŒÚ© Ù‡Ø¯Ù Ø¨Ø²Ø±Ú¯â€ŒØªØ± ØªØ¹ÛŒÛŒÙ† Ú©Ù†!';
    }

    return 'Ø®ÙˆØ¨ Ù¾ÛŒØ´ Ù…ÛŒâ€ŒØ±ÛŒ! ÛŒÚ© Ø¹Ø§Ø¯Øª Ø¯ÛŒÚ¯Ù‡ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ØŸ';
  }

  /// Ù†Ù‚Ù„ Ù‚ÙˆÙ„ Ø±ÙˆØ²Ø§Ù†Ù‡ Ø§Ù„Ù‡Ø§Ù…â€ŒØ¨Ø®Ø´
  String getDailyQuote() {
    final quotes = [
      'ğŸ’¡ "ØªÙ†Ù‡Ø§ Ø±Ø§Ù‡ Ø§Ù†Ø¬Ø§Ù… Ú©Ø§Ø± Ø¹Ø§Ù„ÛŒØŒ Ø¹Ø´Ù‚ Ø¨Ù‡ Ú©Ø§Ø±ÛŒ Ø§Ø³Øª Ú©Ù‡ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ¯Ù‡ÛŒ."',
      'ğŸŒŸ "Ù…ÙˆÙÙ‚ÛŒØª Ù…Ø¬Ù…ÙˆØ¹ ØªÙ„Ø§Ø´â€ŒÙ‡Ø§ÛŒ Ú©ÙˆÚ†Ú© Ø±ÙˆØ²Ø§Ù†Ù‡ Ø§Ø³Øª."',
      'ğŸš€ "Ø´Ø±ÙˆØ¹ Ú©Ù†ØŒ Ø­ØªÛŒ Ø§Ú¯Ø± Ú©Ø§Ù…Ù„ Ù†Ø¨Ø§Ø´ÛŒ."',
      'âš¡ "Ø§Ù…Ø±ÙˆØ² Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¨Ù‡ØªØ±ÛŒÙ† Ø±ÙˆØ² Ø²Ù†Ø¯Ú¯ÛŒØª Ø¨Ø§Ø´Ø¯."',
      'ğŸŒ± "Ù‡Ø± Ø±ÙˆØ² ÙØ±ØµØªÛŒ Ø¨Ø±Ø§ÛŒ Ø±Ø´Ø¯ Ø§Ø³Øª."',
      'ğŸ¯ "ØªÙ…Ø±Ú©Ø² Ø¨Ø± ÛŒÚ© Ù‡Ø¯ÙØŒ Ù‚Ø¯Ø±Øª Ø¨ÛŒâ€ŒÙ†Ù‡Ø§ÛŒØª Ù…ÛŒâ€ŒØ¯Ù‡Ø¯."',
      'ğŸ’ª "ØªÙˆ Ù‚ÙˆÛŒâ€ŒØªØ± Ø§Ø² Ú†ÛŒØ²ÛŒ Ù‡Ø³ØªÛŒ Ú©Ù‡ ÙÚ©Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒ."',
      'ğŸŒˆ "Ø¨Ø¹Ø¯ Ø§Ø² Ù‡Ø± Ø·ÙˆÙØ§Ù†ØŒ Ø±Ù†Ú¯ÛŒÙ†â€ŒÚ©Ù…Ø§Ù†ÛŒ Ù…ÛŒâ€ŒØ¢ÛŒØ¯."',
      'ğŸ”¥ "Ù¾Ø´ØªÚ©Ø§Ø± Ú©Ù„ÛŒØ¯ Ù‡Ø± Ù…ÙˆÙÙ‚ÛŒØªÛŒ Ø§Ø³Øª."',
      'ğŸŒ¸ "Ø²Ù†Ø¯Ú¯ÛŒ Ø²ÛŒØ¨Ø§Ø³ØªØŒ Ø­ØªÛŒ Ø¯Ø± Ù„Ø­Ø¸Ø§Øª Ø³Ø®Øª."',
    ];

    return quotes[_random.nextInt(quotes.length)];
  }

  /// Ù¾ÛŒØ§Ù… ØµØ¨Ø­Ú¯Ø§Ù‡ÛŒ
  String getMorningInsight() {
    final insights = [
      'â˜€ï¸ ØµØ¨Ø­ Ø¨Ø®ÛŒØ±! Ø§Ù…Ø±ÙˆØ² Ú†Ù‡ Ù‡Ø¯ÙÛŒ Ø¯Ø§Ø±ÛŒØŸ',
      'ğŸŒ… ÛŒÚ© Ø±ÙˆØ² Ø¬Ø¯ÛŒØ¯ØŒ ÙØ±ØµØªâ€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯!',
      'ğŸ¯ Ø±ÙˆÛŒ Ø§Ù‡Ø¯Ø§Ù Ø§Ù…Ø±ÙˆØ²Øª ØªÙ…Ø±Ú©Ø² Ú©Ù†.',
      'ğŸ’ª Ø§Ù†Ø±Ú˜ÛŒ Ù…Ø«Ø¨Øª Ø¨Ø±Ø§Øª Ø¢Ø±Ø²Ùˆ Ù…ÛŒâ€ŒÚ©Ù†Ù…!',
      'âœ¨ ÛŒÚ© Ù‚Ø¯Ù… Ú©ÙˆÚ†Ú© Ø§Ù…Ø±ÙˆØ² = ÛŒÚ© ØªØºÛŒÛŒØ± Ø¨Ø²Ø±Ú¯ ÙØ±Ø¯Ø§',
    ];

    return insights[_random.nextInt(insights.length)];
  }

  /// Ù¾ÛŒØ§Ù… Ø´Ø¨Ø§Ù†Ù‡
  String getEveningInsight() {
    final insights = [
      'ğŸŒ™ Ø§Ù…Ø±ÙˆØ² Ú†Ø·ÙˆØ± Ø¨ÙˆØ¯ØŸ ÛŒØ§Ø¯Ø¯Ø§Ø´ØªØ´ Ú©Ù†!',
      'â­ Ø¨Ù‡ Ø¯Ø³ØªØ§ÙˆØ±Ø¯Ù‡Ø§ÛŒ Ø§Ù…Ø±ÙˆØ²Øª ÙÚ©Ø± Ú©Ù†.',
      'ğŸ’¤ Ø§Ø³ØªØ±Ø§Ø­Øª Ø®ÙˆØ¨ Ø¨Ø±Ø§ÛŒ ÙØ±Ø¯Ø§ÛŒ Ø¨Ù‡ØªØ±!',
      'ğŸ“ Ú†Ù†Ø¯ Ø¯Ù‚ÛŒÙ‚Ù‡ Ø¨Ø±Ø§ÛŒ Ø®ÙˆØ¯Øª Ø¨Ù†ÙˆÛŒØ³.',
      'ğŸŒ  Ø´Ú©Ø±Ú¯Ø²Ø§Ø± Ø¨Ø§Ø´ØŒ Ø§Ù…Ø±ÙˆØ² Ù‡Ù… Ú¯Ø°Ø´Øª.',
    ];

    return insights[_random.nextInt(insights.length)];
  }

  /// ØªØ­Ù„ÛŒÙ„ Ù¾ÛŒØ´Ø±ÙØª Ù‡ÙØªÚ¯ÛŒ
  String getWeeklySummary({
    required int goalsCompleted,
    required int habitsStreak,
    required int journalEntries,
  }) {
    var score = 0;
    if (goalsCompleted > 0) score += 3;
    if (habitsStreak >= 7) score += 4;
    if (journalEntries >= 5) score += 3;

    if (score >= 8) {
      return 'ğŸ† Ù‡ÙØªÙ‡ ÙÙˆÙ‚â€ŒØ§Ù„Ø¹Ø§Ø¯Ù‡! ØªÙˆ ÛŒÚ© Ù‚Ù‡Ø±Ù…Ø§Ù† ÙˆØ§Ù‚Ø¹ÛŒ Ù‡Ø³ØªÛŒ!';
    } else if (score >= 5) {
      return 'â­ Ù‡ÙØªÙ‡ Ø®ÙˆØ¨ÛŒ Ø¨ÙˆØ¯! Ù‡ÙØªÙ‡ Ø¨Ø¹Ø¯ Ø±Ùˆ Ø¨Ù‡ØªØ± Ú©Ù†.';
    } else {
      return 'ğŸ’ª Ù‡ÙØªÙ‡ Ø¨Ø¹Ø¯ ÙØ±ØµØª Ø¬Ø¯ÛŒØ¯ÛŒ Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØª Ø§Ø³Øª!';
    }
  }
}
